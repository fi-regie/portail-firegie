<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz du R√©gisseur </title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Font Awesome pour ic√¥nes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Palette "Architectural Safety" -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Palette du mod√®le
                        'stone': {
                            50: '#fafaf9',
                            100: '#f5f5f4',
                            200: '#e7e5e4',
                            300: '#d6d3d1',
                            400: '#a8a29e',
                            500: '#78716c',
                            600: '#57534e',
                            700: '#44403c',
                            800: '#292524',
                            900: '#1c1917',
                        },
                        'orange': {
                            600: '#ea580c',
                        },
                        'emerald': {
                            600: '#059669',
                        },
                        'slate': {
                            700: '#334155',
                        }
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>

body {
    font-family: 'Inter', sans-serif;
    background-color: #fafaf9 !important;
    color: var(--color-primary);
    scroll-behavior: auto !important;
}

/* Custom Chart Container Styling */
.chart-container {
    position: relative;
    width: 100%;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    height: 300px;
    max-height: 400px;
}

@media (min-width: 768px) {
    .chart-container {
        height: 350px;
    }
}

/* Hide scrollbar */
.no-scrollbar::-webkit-scrollbar {
    display: none;
}

.no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* Animation for fade in */
@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

.animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
}

/* Professional Chart Containers */
.chart-container-professional {
    position: relative;
    width: 100%;
    margin: 0 auto;
    height: 400px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

/* Tab transitions */
.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.3s ease-in-out;
}

/* Quiz specific styles */
.quiz-option {
    transition: all 0.2s ease;
}

.quiz-option:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px -2px rgba(0, 0, 0, 0.1);
}

.quiz-option.selected {
    border-color: #059669;
    background-color: #f0fdf4;
}

.quiz-option.correct {
    border-color: #059669;
    background-color: #f0fdf4;
}

.quiz-option.incorrect {
    border-color: #dc2626;
    background-color: #fef2f2;
}

/* Level indicators */
.level-student {
    background-color: #fef3c7;
    color: #92400e;
}

.level-pro {
    background-color: #d1fae5;
    color: #065f46;
}

.level-expert {
    background-color: #e0e7ff;
    color: #3730a3;
}

/* CONFIGURATION PAGE - CORRECTIONS */
/* Options de configuration (questions et niveau) */
.question-option.selected,
.level-option.selected {
    border-color: #ea580c !important;
    background-color: #fff7ed !important;
}

/* Cercles de s√©lection */
.question-option .selector-circle,
.level-option .selector-circle {
    border: 2px solid #d6d3d1 !important;
    background-color: transparent !important;
    width: 20px !important;
    height: 20px !important;
    border-radius: 50% !important;
}

.question-option.selected .selector-circle,
.level-option.selected .selector-circle {
    border-color: #ea580c !important;
    background-color: #ea580c !important;
}

/* Options de th√®mes */
.theme-option.selected {
    border-color: #059669 !important;
    background-color: #f0fdf4 !important;
}

.theme-option.selected i:first-child {
    color: #059669 !important;
}

.theme-option.selected span {
    color: #065f46 !important;
    font-weight: 500;
}

/* Ic√¥nes +/check des th√®mes */
.theme-option i:last-child {
    color: #a8a29e !important;
}

.theme-option.selected i:last-child {
    color: #059669 !important;
}

/* Bouton de d√©marrage */
#startBtn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

#startBtn:disabled:hover {
    transform: none !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
}    
    </style>
</head>

<body class="bg-stone-50 text-stone-800 font-sans antialiased selection:bg-orange-200 selection:text-orange-900">

    <!-- Navigation / Header -->
    <nav class="bg-white border-b border-stone-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl mr-2"></span>
                    <h1 class="text-xl font-bold tracking-tight text-slate-700"> Quiz du R√©gisseur
                        <span class="text-orange-600 text-sm font-normal uppercase ml-2 tracking-widest">CTS & ERP Type
                            L</span>
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button
                        onclick="window.location.href='https://fi-regie.github.io/portail-firegie/index.html#accueil';"
                        class="text-sm text-stone-500 hover:text-orange-600 transition flex items-center hidden sm:inline-flex">
                        <i class="fas fa-arrow-left mr-2"></i>
                        Retour au Portail
                    </button>
                    <div class="h-3 w-3 rounded-full bg-emerald-500 animate-pulse" title="Application active"></div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Navigation professionnelle -->
    <div class="bg-white border-b border-stone-200">
        <div class="max-w-8xl mx-auto">
            <nav class="flex overflow-x-auto no-scrollbar px-4">
                <button onclick="switchTab('config')"
                    class="nav-btn px-4 py-3 border-b-2 border-orange-600 text-orange-600 whitespace-nowrap flex items-center active"
                    id="btn-config">
                    <i class="fas fa-cog mr-2"></i>Configuration
                </button>
                <button onclick="switchTab('quiz')"
                    class="nav-btn px-4 py-3 border-b-2 border-transparent hover:border-orange-600 hover:text-orange-600 whitespace-nowrap flex items-center"
                    id="btn-quiz">
                    <i class="fas fa-question-circle mr-2"></i>Quiz
                </button>
                <button onclick="switchTab('resultats')"
                    class="nav-btn px-4 py-3 border-b-2 border-transparent hover:border-emerald-600 hover:text-emerald-600 whitespace-nowrap flex items-center"
                    id="btn-resultats">
                    <i class="fas fa-chart-line mr-2"></i>R√©sultats
                </button>
            </nav>
        </div>
    </div>

    <main class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- ONGLET 1 : CONFIGURATION -->
        <div id="config" class="tab-content active">
            <div class="max-w-6xl mx-auto">
                <!-- Introduction -->
                <div class="bg-white rounded-xl shadow-sm border border-stone-100 p-6 md:p-8 mb-8">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-700">üöÄ Configuration du Quiz CTS Pro</h2>
                    <p class="text-stone-600 leading-relaxed mb-6">
                        Personnalisez votre session d'entra√Ænement selon vos besoins. Ce quiz interactif vous permet de
                        tester vos connaissances sur la r√©glementation des Chapiteaux, Tentes et Structures (CTS) de
                        mani√®re progressive et p√©dagogique.
                    </p>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                        <div class="bg-stone-50 p-4 rounded-lg border-l-4 border-orange-500">
                            <span class="block text-xs font-bold text-stone-400 uppercase tracking-wider mb-1">Objectif
                                1</span>
                            <span class="font-medium">Valider vos connaissances CTS</span>
                        </div>
                        <div class="bg-stone-50 p-4 rounded-lg border-l-4 border-slate-600">
                            <span class="block text-xs font-bold text-stone-400 uppercase tracking-wider mb-1">Objectif
                                2</span>
                            <span class="font-medium">Identifier vos points d'am√©lioration</span>
                        </div>
                        <div class="bg-stone-50 p-4 rounded-lg border-l-4 border-emerald-500">
                            <span class="block text-xs font-bold text-stone-400 uppercase tracking-wider mb-1">Objectif
                                3</span>
                            <span class="font-medium">Obtenir une certification professionnelle</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- SECTION 1 : Nombre de questions -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-list-ol text-orange-600 mr-3"></i>
                            Nombre de questions
                        </h3>
                        <p class="text-sm text-stone-500 mb-4">Choisissez la dur√©e de votre session</p>
                        <div class="space-y-3" id="questionCountOptions">
                            <!-- Les options seront g√©n√©r√©es dynamiquement -->
                        </div>
                    </div>

                    <!-- SECTION 2 : Niveau de difficult√© -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-trophy text-orange-600 mr-3"></i>
                            Niveau de difficult√©
                        </h3>
                        <p class="text-sm text-stone-500 mb-4">Adaptez la complexit√© des questions</p>
                        <div class="space-y-3" id="levelOptions">
                            <!-- Les options seront g√©n√©r√©es dynamiquement -->
                        </div>
                    </div>

                    <!-- SECTION 3 : Th√®mes du quiz -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-book-open text-orange-600 mr-3"></i>
                            Th√®mes du quiz
                        </h3>
                        <p class="text-sm text-stone-500 mb-4">S√©lectionnez les domaines √† tester</p>
                        <div class="space-y-3" id="themeOptions">
                            <!-- Les options seront g√©n√©r√©es dynamiquement -->
                        </div>
                    </div>
                </div>

                <!-- R√©sum√© de configuration -->
                <div class="mt-8 bg-emerald-50 rounded-xl p-6 border-l-4 border-emerald-500">
                    <h4 class="text-lg font-bold text-emerald-800 mb-3 flex items-center">
                        <i class="fas fa-check-circle mr-3"></i>
                        R√©sum√© de votre configuration
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="configSummary">
                        <div>
                            <div class="font-bold text-stone-700">Questions :</div>
                            <div class="text-emerald-700 font-medium" id="summaryQuestions">0</div>
                        </div>
                        <div>
                            <div class="font-bold text-stone-700">Niveau :</div>
                            <div class="text-emerald-700 font-medium" id="summaryLevel">Non s√©lectionn√©</div>
                        </div>
                        <div>
                            <div class="font-bold text-stone-700">Th√®mes :</div>
                            <div class="text-emerald-700 font-medium" id="summaryThemes">0 s√©lectionn√©</div>
                        </div>
                    </div>
                </div>

                <!-- Bouton de d√©marrage -->
                <div class="mt-12 text-center">
                    <button onclick="startQuiz()"
                        class="bg-gradient-to-r from-orange-600 to-orange-700 text-white font-bold py-4 px-12 rounded-lg hover:from-orange-700 hover:to-orange-800 transition text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1"
                        id="startBtn">
                        <i class="fas fa-rocket mr-3"></i>
                        üöÄ D√©marrer le quiz
                    </button>
                    <p class="text-sm text-stone-500 mt-4">
                        <i class="fas fa-info-circle mr-2"></i>
                        Temps estim√© : <span id="estimatedTime" class="font-bold">--</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- ONGLET 2 : QUIZ -->
        <div id="quiz" class="tab-content">
            <div class="max-w-6xl mx-auto">
                <!-- Barre de progression et statistiques -->
                <div class="bg-white rounded-xl shadow-sm p-6 mb-8">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                        <div class="text-center p-4 bg-stone-50 rounded-lg border border-stone-200">
                            <div class="text-2xl font-bold text-slate-800" id="currentQuestion">0/0</div>
                            <div class="text-sm text-stone-600">Question</div>
                        </div>
                        <div class="text-center p-4 bg-emerald-50 rounded-lg border border-emerald-200">
                            <div class="text-2xl font-bold text-emerald-800" id="correctAnswers">0</div>
                            <div class="text-sm text-emerald-700">Correctes</div>
                        </div>
                        <div class="text-center p-4 bg-blue-50 rounded-lg border border-blue-200">
                            <div class="text-2xl font-bold text-blue-800" id="scorePercentage">0%</div>
                            <div class="text-sm text-blue-700">Score</div>
                        </div>
                        <div class="text-center p-4 bg-orange-50 rounded-lg border border-orange-200">
                            <div class="text-2xl font-bold text-orange-800" id="questionsLeft">0</div>
                            <div class="text-sm text-orange-700">Restantes</div>
                        </div>
                    </div>

                    <!-- Barre de progression d√©taill√©e -->
                    <div class="mb-4">
                        <div class="flex justify-between text-sm text-stone-600 mb-2">
                            <span>Progression</span>
                            <span id="progressText">0%</span>
                        </div>
                        <div class="h-3 bg-stone-200 rounded-full overflow-hidden">
                            <div id="progressBar"
                                class="h-full bg-gradient-to-r from-orange-500 to-orange-600 transition-all duration-500"
                                style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- Question actuelle -->
                <div class="bg-white rounded-xl shadow-sm p-8 mb-8">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <div class="inline-block px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm font-bold mb-3"
                                id="questionTheme">TH√àME</div>
                            <h3 class="text-2xl font-bold text-slate-800" id="questionText">Configurez et d√©marrez le
                                quiz pour commencer...</h3>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-stone-500 mb-1">Difficult√©</div>
                            <div class="flex space-x-1">
                                <div class="w-3 h-3 rounded-full bg-stone-300"></div>
                                <div class="w-3 h-3 rounded-full bg-stone-300"></div>
                                <div class="w-3 h-3 rounded-full bg-stone-300"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Options de r√©ponse -->
                    <div class="space-y-4 mb-8" id="quizOptions">
                        <!-- Les options seront inject√©es par JavaScript -->
                    </div>

                    <!-- Indices et aides -->
                    <div class="bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500 mb-6 hidden" id="hintContainer">
                        <div class="flex items-start">
                            <i class="fas fa-lightbulb text-blue-600 text-xl mr-3 mt-1"></i>
                            <div>
                                <h4 class="font-bold text-blue-800 mb-1">Indice p√©dagogique</h4>
                                <p class="text-blue-700" id="hintText"></p>
                            </div>
                        </div>
                    </div>

                    <!-- Feedback de r√©ponse -->
                    <div class="mb-6 hidden" id="feedbackContainer">
                        <!-- Le feedback sera inject√© par JavaScript -->
                    </div>

                    <!-- √âtude de cas li√©e -->
                    <div class="bg-stone-50 rounded-lg p-4 border-l-4 border-slate-600 hidden" id="caseStudyContainer">
                        <h4 class="font-bold text-slate-800 mb-2 flex items-center">
                            <i class="fas fa-balance-scale mr-2"></i>
                            √âtude de Cas Li√©e
                        </h4>
                        <div id="caseStudyContent"></div>
                    </div>

                    <!-- R√©f√©rences l√©gales -->
                    <div class="bg-stone-50 rounded-lg p-4 hidden" id="referenceContainer">
                        <h4 class="font-bold text-stone-800 mb-2 flex items-center">
                            <i class="fas fa-book mr-2"></i>
                            R√©f√©rence l√©gale
                        </h4>
                        <p class="text-sm text-stone-600" id="referenceText"></p>
                        <a href="#" target="_blank" class="text-sm text-blue-600 hover:underline inline-block mt-2"
                            id="referenceLink">
                            <i class="fas fa-external-link-alt mr-1"></i>
                            Consulter le texte
                        </a>
                    </div>
                </div>

                <!-- Contr√¥les de navigation -->
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="flex space-x-4">
                        <button onclick="showHint()"
                            class="flex items-center px-5 py-3 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition">
                            <i class="fas fa-lightbulb mr-2"></i>
                            Afficher un indice
                        </button>
                    </div>

                    <div class="flex space-x-4">
                        <button onclick="previousQuestion()"
                            class="flex items-center px-6 py-3 bg-stone-100 text-stone-700 rounded-lg hover:bg-stone-200 transition disabled:opacity-50 disabled:cursor-not-allowed"
                            id="prevBtn" disabled>
                            <i class="fas fa-arrow-left mr-2"></i>
                            Pr√©c√©dent
                        </button>
                        <button onclick="nextQuestionOrFinish()"
                            class="flex items-center px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition"
                            id="nextBtn">
                            Suivant
                            <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ONGLET 3 : R√âSULTATS -->
        <div id="resultats" class="tab-content">
            <div class="max-w-6xl mx-auto">
                <!-- Sceau de validation -->
                <div class="bg-white rounded-xl shadow-sm p-8 mb-8 text-center border border-stone-200">
                    <i class="fas fa-award text-6xl text-emerald-600 mb-4"></i>
                    <h2 class="text-3xl font-bold mb-4 text-slate-800">R√©sultats du Quiz CTS</h2>
                    <p class="text-lg text-stone-600">
                        Analyse d√©taill√©e de vos performances et recommandations personnalis√©es.
                    </p>
                </div>

                <!-- Score et statistiques -->
                <div id="resultsContainer" class="hidden">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white p-6 rounded-xl shadow-sm text-center">
                            <div class="text-4xl font-bold text-emerald-600" id="finalScorePercentage">0%</div>
                            <div class="text-sm text-stone-600">Score final</div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm text-center">
                            <div class="text-4xl font-bold text-emerald-600" id="totalCorrectAnswers">0</div>
                            <div class="text-sm text-stone-600">R√©ponses correctes</div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm text-center">
                            <div class="text-4xl font-bold text-stone-600" id="totalTimeTaken">00:00</div>
                            <div class="text-sm text-stone-600">Temps total</div>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm text-center">
                            <div class="text-4xl font-bold text-orange-600" id="averageTime">0s</div>
                            <div class="text-sm text-stone-600">Temps moyen/question</div>
                        </div>
                    </div>

                    <!-- Graphique de performance -->
                    <div class="bg-white p-6 rounded-xl shadow-sm mb-8">
                        <h3 class="text-xl font-bold mb-4">Analyse par th√®me</h3>
                        <div class="chart-container-professional">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>

                    <!-- Recommandations -->
                    <div class="bg-orange-50 rounded-xl p-6 border-l-4 border-orange-500 mb-8">
                        <h4 class="text-2xl font-bold mb-4">Plan d'am√©lioration</h4>
                        <ul class="space-y-3" id="adviceList">
                            <!-- Les conseils seront inject√©s par JavaScript -->
                        </ul>
                    </div>

                    <!-- Certificat -->
                    <div class="bg-gradient-to-r from-slate-800 to-slate-700 text-white rounded-xl p-8 shadow-sm mb-8">
                        <div class="text-center">
                            <i class="fas fa-certificate text-5xl text-emerald-300 mb-4"></i>
                            <h3 class="text-2xl font-bold mb-6">Certificat de Formation</h3>
                            <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 max-w-2xl mx-auto">
                                <p class="mb-4">Atteste que</p>
                                <div class="text-3xl font-bold mb-6 border-b border-white/30 pb-4"
                                    contenteditable="true" id="certificateName">[VOTRE NOM]</div>
                                <p class="mb-2">a suivi avec succ√®s la formation</p>
                                <p class="text-xl font-bold mb-6">"Quiz CTS Pro - R√©glementation Chapiteaux, Tentes et
                                    Structures"</p>
                                <div class="grid grid-cols-2 gap-6 text-sm">
                                    <div>
                                        <div class="font-bold text-emerald-300">Score obtenu</div>
                                        <div id="certificateScore">0%</div>
                                    </div>
                                    <div>
                                        <div class="font-bold text-emerald-300">Date</div>
                                        <div id="certificateDate"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Boutons d'action -->
                    <div class="flex flex-col md:flex-row justify-center gap-4">
                        <button onclick="downloadCertificate()"
                            class="bg-emerald-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-emerald-700 transition flex items-center justify-center">
                            <i class="fas fa-download mr-2"></i>
                            T√©l√©charger le certificat
                        </button>
                        <button onclick="restartQuiz()"
                            class="bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-900 transition flex items-center justify-center">
                            <i class="fas fa-redo mr-2"></i>
                            Nouveau quiz
                        </button>
                    </div>
                </div>

                <!-- Message si pas encore de quiz -->
                <div id="noResultsMessage" class="text-center py-12">
                    <i class="fas fa-clipboard-list text-5xl text-stone-400 mb-4"></i>
                    <h4 class="text-xl font-bold text-stone-600">Aucun r√©sultat disponible</h4>
                    <p class="text-stone-500">Commencez un quiz pour voir vos r√©sultats ici</p>
                    <button onclick="switchTab('config')"
                        class="mt-6 bg-orange-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-700 transition">
                        <i class="fas fa-cog mr-2"></i>
                        Configurer un quiz
                    </button>
                </div>
            </div>
        </div>

    </main>

    <!-- Pied de page -->
    <footer class="bg-[#e9ecef] text-[#495057] py-8 mt-12 border-t border-[#dee2e6]">
        <div class="max-w-8xl mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>

                    <!-- Section 1 -->
                    <h4 class="text-xl mb-4 text-[#343a40]">Portail de veille juridique ERP & CTS</h4>
                    <p class="text-[#6c757d] text-sm mb-2">
                        Suite d'Applications destin√©es aux
                        R√©gisseurs, Exploitants & Organismes de Formation
                    </p>

                    <p class="text-[#495057] text-sm font-medium mb-2 mt-4">
                        L'Application ne se substitue pas :
                    </p>
                    <ul class="text-[#6c757d] text-sm space-y-1 mb-4">
                        <li>‚Ä¢ Aux textes officiels publi√©s</li>
                        <li>‚Ä¢ √Ä l'avis d'experts certifi√©s</li>
                        <li>‚Ä¢ Aux commissions de s√©curit√© comp√©tentes</li>
                        <li>‚Ä¢ √Ä la jurisprudence en vigueur</li>
                    </ul>

                    <p class="text-[#6c757d] text-sm">
                        <small>Mise √† jour : 27 d√©cembre 2025</small>
                    </p>
                </div>

                <!-- Section 2 -->
                <div class="md:border- md:border-[] md:pl-8">
                    <h4 class="text-xl mb-4 text-[#343a40]">Applications</h4>

                    <div class="space-y-4">
                        <a href="https://fi-regie.github.io/portail-firegie/index.html#accueil" target="_blank"
                            class="flex items-start text-[#495057] hover:text-[#0d6efd] transition">
                            <i class="fas fa-external-link-alt mr-2 mt-1"></i>
                            <div>
                                <h5 class="text-[0.95rem] font-medium">Portail de veille juridique ERP & CTS</h5>
                                <p class="text-sm text-[#6c757d] mt-1">
                                    Suite d'Applications destin√©e aux
                                    R√©gisseurs, Exploitants & Organismes de Formation
                                </p>
                            </div>
                        </a>

                        <a href="https://fi-regie.github.io/portail-firegie/apps/reglementation-cts/index.html"
                            target="_blank" class="flex items-start text-[#495057] hover:text-[#0d6efd] transition">
                            <i class="fas fa-external-link-alt mr-2 mt-1"></i>
                            <div>
                                <h5>R√©glementation Spectacle Itin√©rant</h5>
                                <p class="text-sm text-[#6c757d] mt-1">
                                    Outils de veille juridique & de s√©curit√© du Spectacle Itin√©rant
                                </p>
                            </div>
                        </a>

                        <a href="https://fi-regie.github.io/portail-firegie/apps/simulation/index.html" target="_blank"
                            class="flex items-start text-[#495057] hover:text-[#0d6efd] transition">
                            <i class="fas fa-external-link-alt mr-2 mt-1"></i>
                            <div>
                                <h5 class="text-[0.95rem] font-medium">Outil de Simulation S√©curit√©</h5>
                                <p class="text-sm text-[#6c757d] mt-1">
                                    Simulez votre Cat√©gorie ERP, vos d√©gagements UP, √âch. de Beaufort
                                </p>
                            </div>
                        </a>

                        <a href="https://fi-regie.github.io/portail-firegie/apps/reglementation-erp/index.html"
                            target="_blank" class="flex items-start text-[#495057] hover:text-[#0d6efd] transition">
                            <i class="fas fa-external-link-alt mr-2 mt-1"></i>
                            <div>
                                <h5>R√©glementation ERP</h5>
                                <p class="text-sm text-[#6c757d] mt-1">
                                    Application interactive des textes officiels pour consulter rapidement la
                                    R√®glementation ERP (CCH, Arr√™t√© du 25 juin 1980)
                                </p>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Section 3 -->
                <div class="md:border- md:border-[] md:pl-8">
                    <h4 class="text-xl mb-4 text-[#343a40]">Formation</h4>
                    <div class="space-y-4">
                        <a href="https://fi-regie.github.io/portail-firegie/apps/focus-reglementation/index.html"
                            target="_blank" class="flex items-start text-[#495057] hover:text-[#0d6efd] transition">
                            <i class="fas fa-external-link-alt mr-2 mt-1"></i>
                            <div>
                                <h5 class="text-[0.95rem] font-medium">Focus R√©glementation</h5>
                                <p class="text-sm text-[#6c757d] mt-1">
                                    Guide pour comprendre l'architecture de la
                                    r√©glementation officielle ERP
                                </p>
                            </div>
                        </a>

                        <a href="https://fi-regie.github.io/portail-firegie/apps/securite-incendie/index.html"
                            target="_blank" class="flex items-start text-[#495057] hover:text-[#0d6efd] transition">
                            <i class="fas fa-external-link-alt mr-2 mt-1"></i>
                            <div>
                                <h5>Guide de la S√©curit√© Incendie</h5>
                                <p class="text-sm text-[#6c757d] mt-1">
                                    Synth√©se des obligations des recponsables de la s√©curit√© incendie ERP
                                </p>
                            </div>
                        </a>

                        <a href="https://fi-regie.github.io/portail-firegie/apps/formation-securite/index.html"
                            target="_blank" class="flex items-start text-[#495057] hover:text-[#0d6efd] transition">
                            <i class="fas fa-external-link-alt mr-2 mt-1"></i>
                            <div>
                                <h5>Formation S√©curit√© ERP</h5>
                                <p class="text-sm text-[#6c757d] mt-1">
                                    Outil p√©dagogique destin√© √† la formation des responsables techniques
                                    d'ERP Type L & CTS.
                                </p>
                            </div>
                        </a>

                        <a href="https://fi-regie.github.io/portail-firegie/apps/quiz/index.html" target="_blank"
                            class="flex items-start text-[#495057] hover:text-[#0d6efd] transition">
                            <i class="fas fa-external-link-alt mr-2 mt-1"></i>
                            <div>
                                <h5>Le Quiz du R√©gisseur</h5>
                                <p class="text-sm text-[#6c757d] mt-1">
                                    Amusez-vous, apprenez, √©valuez vos comp√©tences
                                </p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-8 border-t border-[#ced4da] text-center text-sm text-[#6c757d]">
                <p>
                    <i class="fas fa-gavel mr-2"></i>
                    Portail de veille juridique CTS & ERP Type L
                </p>
                <p class="mt-2">
                    ¬©Ô∏èOpen Source ‚Ä¢ Partage & Contribution ‚Ä¢ Contact :
                    philippe.potier-regie@proton.me
                </p>
            </div>
        </div>
    </footer>

    <script>
        // BASE DE DONN√âES COMPL√àTE DES QUESTIONS
        const allQuestions = [
            // TH√àME : G√âN√âRALIT√âS (10 questions)
            {
                id: 1,
                question: "√Ä partir de quelle superficie un √©tablissement CTS est-il soumis √† la r√©glementation ?",
                answers: [
                    "√Ä partir de 16 m¬≤",
                    "√Ä partir de 25 m¬≤",
                    "√Ä partir de 50 m¬≤",
                    "√Ä partir de 100 m¬≤"
                ],
                correctAnswer: 0,
                level: "student",
                theme: "general",
                hint: "Consultez l'article CTS 1, paragraphe 2",
                explanation: "Selon l'article CTS 1 ¬ß2, la r√©glementation s'applique aux √©tablissements destin√©s √† √™tre clos, poss√©dant une couverture souple, d'une superficie sup√©rieure ou √©gale √† 16 m¬≤.",
                reference: "Article CTS 1 ¬ß2 : 'Les dispositions du pr√©sent r√®glement s'appliquent aux √©tablissements [...] d'une superficie sup√©rieure ou √©gale √† 16 m¬≤.'",
                visualAid: `
                    <div class="schema">
                        <strong>üìê Surface minimale : 16 m¬≤</strong><br>
                        ‚Ä¢ Chapiteaux, tentes, structures<br>
                        ‚Ä¢ √âtablissements itin√©rants<br>
                        ‚Ä¢ Couverture souple<br>
                        ‚Ä¢ Destin√©s √† √™tre clos
                    </div>
                    <div class="example">
                        <strong>üìù Exemple :</strong><br>
                        Une tente de 4m x 4m = 16 m¬≤ ‚Üí R√®glement applicable<br>
                        Une tente de 3m x 3m = 9 m¬≤ ‚Üí R√®glement non applicable
                    </div>
                `
            },
            {
                id: 2,
                question: "Quelle est la distance minimale entre deux √©tablissements CTS pour qu'ils soient consid√©r√©s comme distincts ?",
                answers: [
                    "3 m√®tres",
                    "5 m√®tres",
                    "8 m√®tres",
                    "10 m√®tres"
                ],
                correctAnswer: 2,
                level: "student",
                theme: "general",
                hint: "Article CTS 1, paragraphe 6",
                explanation: "L'article CTS 1 ¬ß6 pr√©cise que les √©tablissements distants de 8 m au moins sont consid√©r√©s comme distincts.",
                reference: "Article CTS 1 ¬ß6 : 'Les √©tablissements distants entre eux de 8 m au moins sont consid√©r√©s comme autant d'√©tablissements distincts.'",
                visualAid: `
                    <div class="schema">
                        <strong>üìè Distance entre √©tablissements :</strong><br>
                        ‚Ä¢ 8 m minimum pour √©tablissements distincts<br>
                        ‚Ä¢ 5 m pour √©tablissements de 16-50 m¬≤<br>
                        ‚Ä¢ Mesur√© entre les enveloppes
                    </div>
                `
            },
            {
                id: 3,
                question: "Qui d√©livre le registre de s√©curit√© d'un √©tablissement CTS ?",
                answers: [
                    "Le maire de la commune",
                    "Le pr√©fet du d√©partement",
                    "Le fabricant",
                    "L'organisme de v√©rification technique"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "general",
                hint: "Article CTS 3, paragraphe 1",
                explanation: "Le registre de s√©curit√© est d√©livr√© par le pr√©fet du d√©partement (ou le pr√©fet de Police pour Paris) apr√®s avis de la commission consultative d√©partementale.",
                reference: "Article CTS 3 ¬ß1 : 'Le registre de s√©curit√© est d√©livr√© par le pr√©fet du d√©partement [...] apr√®s avis de la commission consultative d√©partementale de s√©curit√© et d'accessibilit√©.'",
                visualAid: `
                    <div class="schema">
                        <strong>üìã Proc√©dure d'obtention :</strong><br>
                        1. Demande par le propri√©taire/fabricant<br>
                        2. V√©rification par organisme agr√©√© CTS<br>
                        3. Transmission au pr√©fet<br>
                        4. D√©livrance du registre
                    </div>
                `
            },
            {
                id: 4,
                question: "Quels types d'√©tablissements ne sont pas vis√©s par la r√©glementation CTS ?",
                answers: [
                    "Les chapiteaux de cirque",
                    "Les campings et man√®ges forains",
                    "Les structures gonflables",
                    "Les tentes de r√©ception"
                ],
                correctAnswer: 1,
                level: "student",
                theme: "general",
                hint: "Article CTS 1, paragraphe 5",
                explanation: "L'article CTS 1 ¬ß5 exclut sp√©cifiquement les campings et les man√®ges forains du champ d'application.",
                reference: "Article CTS 1 ¬ß5 : 'Les campings et les man√®ges forains ne sont pas vis√©s par le pr√©sent type.'",
                visualAid: `
                    <div class="schema">
                        <strong>üö´ Exclusions :</strong><br>
                        ‚úÖ Campings (r√®glement sp√©cifique)<br>
                        ‚úÖ Man√®ges forains<br>
                        ‚ùå Chapiteaux de cirque (inclus)<br>
                        ‚ùå Tentes √©v√©nementielles (incluses)
                    </div>
                `
            },
            {
                id: 5,
                question: "Pour les √©tablissements de 16 √† 50 m¬≤, quelles dispositions s'appliquent ?",
                answers: [
                    "Toutes les dispositions du CTS",
                    "Seules les dispositions de base",
                    "Aucune disposition",
                    "Uniquement les dispositions √©lectriques"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "general",
                hint: "Article CTS 1, paragraphe 3",
                explanation: "Ces √©tablissements ne sont soumis qu'aux dispositions de base sp√©cifi√©es √† l'article CTS 1 ¬ß3.",
                reference: "Article CTS 1 ¬ß3 : 'Les √©tablissements d'une superficie sup√©rieure ou √©gale √† 16 m¬≤ mais inf√©rieure √† 50 m¬≤ sont soumis aux seules dispositions des paragraphes 1 et 6 du pr√©sent article...'",
                visualAid: `
                    <div class="schema">
                        <strong>üìä R√®glementation par superficie :</strong><br>
                        ‚Ä¢ < 16 m¬≤ : Hors champ (sauf si cumul ‚â• 16 m¬≤)<br>
                        ‚Ä¢ 16-50 m¬≤ : Dispositions de base<br>
                        ‚Ä¢ ‚â• 50 m¬≤ : R√®glement complet
                    </div>
                `
            },

            // TH√àME : CONSTRUCTION (10 questions)
            {
                id: 6,
                question: "Quelle pression dynamique de base doit √™tre consid√©r√©e pour le calcul de stabilit√© au vent ?",
                answers: [
                    "0,25 KN/m¬≤",
                    "0,47 KN/m¬≤",
                    "0,75 KN/m¬≤",
                    "1,00 KN/m¬≤"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "construction",
                hint: "Article CTS 7, paragraphe 1",
                explanation: "L'article CTS 7 ¬ß1 impose une pression dynamique de base de 0,47 KN/m¬≤ correspondant √† un vent normal.",
                reference: "Article CTS 7 ¬ß1 : 'Tous les √©tablissements doivent √™tre con√ßus et install√©s pour rester stables sous les effets simultan√©s d'un vent normal correspondant √† une pression dynamique de base de 0,47 KN par m√®tre carr√©.'",
                visualAid: `
                    <div class="schema">
                        <strong>üí® Calcul de r√©sistance au vent :</strong><br>
                        Pression de base : 0,47 KN/m¬≤<br>
                        Coefficient dynamique : 1,25<br>
                        Hauteur : prise en compte<br>
                        Site : normal (ks = 1)
                    </div>
                    <div class="example">
                        <strong>üìù Exemple pour 100 m¬≤ :</strong><br>
                        Force = 0,47 √ó 100 = 47 KN<br>
                        ‚âà 4 700 kg de pouss√©e au vent
                    </div>
                `
            },
            {
                id: 7,
                question: "√Ä quelle vitesse de vent faut-il √©vacuer le public d'un √©tablissement CTS ?",
                answers: [
                    "60 km/h",
                    "80 km/h",
                    "100 km/h",
                    "120 km/h"
                ],
                correctAnswer: 2,
                level: "pro",
                theme: "construction",
                hint: "Article CTS 7, paragraphe 2",
                explanation: "L'article CTS 7 ¬ß2 pr√©voit l'√©vacuation lorsque le vent d√©passe 100 km/h.",
                reference: "Article CTS 7 ¬ß2 : 'L'√©tablissement doit √™tre √©vacu√© [...] si le vent normal d√©passe 100 km/h.'",
                visualAid: `
                    <div class="schema">
                        <strong>üå™Ô∏è Crit√®res d'√©vacuation :</strong><br>
                        ‚úÖ Vent > 100 km/h<br>
                        ‚úÖ Neige > 4 cm non d√©blay√©e<br>
                        ‚úÖ Circonstances exceptionnelles<br>
                        ‚ö†Ô∏è An√©mom√®tre obligatoire pour surveillance
                    </div>
                `
            },
            {
                id: 8,
                question: "Quelle cat√©gorie de mat√©riaux est exig√©e pour la couverture des CTS ?",
                answers: [
                    "M0",
                    "M1",
                    "M2",
                    "M3"
                ],
                correctAnswer: 2,
                level: "student",
                theme: "construction",
                hint: "Article CTS 8, paragraphe 2",
                explanation: "La couverture, la double couverture int√©rieure √©ventuelle et la ceinture de l'√©tablissement doivent √™tre en mat√©riaux de cat√©gorie M2.",
                reference: "Article CTS 8 ¬ß2 : 'La couverture, la double couverture int√©rieure √©ventuelle et la ceinture de l'√©tablissement doivent √™tre r√©alis√©es en mat√©riaux de cat√©gorie M2.'",
                visualAid: `
                    <div class="schema">
                        <strong>üî• Classification M2 :</strong><br>
                        ‚Ä¢ Non inflammable<br>
                        ‚Ä¢ Pas de gouttes enflamm√©es<br>
                        ‚Ä¢ Propagation limit√©e<br>
                        ‚Ä¢ Marquage NF obligatoire
                    </div>
                    <div class="example">
                        <strong>‚úÖ Mat√©riaux accept√©s :</strong><br>
                        ‚Ä¢ Toiles polyester enduites PVC<br>
                        ‚Ä¢ Membranes polyester/PVC<br>
                        ‚Ä¢ Toiles class√©es M2 avec marquage
                    </div>
                `
            },
            {
                id: 9,
                question: "Que doit-on faire des c√¢bles de contreventement situ√©s √† moins de 2 m√®tres du sol ?",
                answers: [
                    "Les supprimer",
                    "Les signaler et les prot√©ger",
                    "Les peindre en rouge",
                    "Les renforcer"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "construction",
                hint: "Article CTS 8, paragraphe 4",
                explanation: "Les c√¢bles √† moins de 2 m doivent √™tre prot√©g√©s et signal√©s pour √©viter les accidents.",
                reference: "Article CTS 8 ¬ß4 : 'Toutes dispositions doivent √™tre prises pour que les c√¢bles de contreventement situ√©s √† une hauteur inf√©rieure √† 2 m√®tres [...] ne puissent pas constituer un risque pour les personnes.'",
                visualAid: `
                    <div class="schema">
                        <strong>‚ö†Ô∏è Protection des c√¢bles :</strong><br>
                        Hauteur < 2 m ‚Üí Protection obligatoire<br>
                        Options :<br>
                        ‚Ä¢ Gaines de protection<br>
                        ‚Ä¢ Signalisation visible<br>
                        ‚Ä¢ Balisage lumineux nocturne
                    </div>
                `
            },
            {
                id: 10,
                question: "Quelle est la composition du num√©ro d'identification d'un CTS ?",
                answers: [
                    "Uniquement le d√©partement",
                    "Type, d√©partement, ann√©e et num√©ro de s√©rie",
                    "Uniquement le type et l'ann√©e",
                    "Le nom du propri√©taire"
                ],
                correctAnswer: 1,
                level: "expert",
                theme: "construction",
                hint: "Article CTS 9, paragraphe 1",
                explanation: "Le num√©ro comprend : lettre du type (C/T/S/SE), num√©ro de d√©partement, ann√©e et num√©ro de s√©rie.",
                reference: "Article CTS 9 ¬ß1 : 'Le num√©ro d'identification comprend : une lettre : C pour chapiteau, T pour tente, S pour structure et SE pour structure √† √©tage ; 2 ou 3 chiffres correspondant au num√©ro du d√©partement ; 4 chiffres correspondant √† l'ann√©e de d√©livrance ; 3 chiffres correspondant au num√©ro de s√©rie.'",
                visualAid: `
                    <div class="schema">
                        <strong>üî¢ Format du num√©ro :</strong><br>
                        S - 972 - 2009 - 002<br><br>
                        S = Structure<br>
                        972 = Martinique<br>
                        2009 = Ann√©e<br>
                        002 = Num√©ro de s√©rie
                    </div>
                `
            },

            // TH√àME : √âLECTRICIT√â (10 questions)
            {
                id: 11,
                question: "Quelle norme doit respecter l'installation √©lectrique d'un CTS ?",
                answers: [
                    "NF C 14-100",
                    "NF C 15-100",
                    "NF C 16-100",
                    "NF C 17-100"
                ],
                correctAnswer: 1,
                level: "student",
                theme: "electricity",
                hint: "Article CTS 16, paragraphe 2",
                explanation: "Les installations doivent √™tre conformes √† la norme NF C 15-100.",
                reference: "Article CTS 16 ¬ß2 : 'Les installations √©lectriques doivent √™tre conformes aux normes homologu√©es les concernant et notamment √† la norme NF C 15-100.'",
                visualAid: `
                    <div class="schema">
                        <strong>‚ö° Norme NF C 15-100 :</strong><br>
                        ‚Ä¢ Installations basse tension<br>
                        ‚Ä¢ Protection diff√©rentielle obligatoire<br>
                        ‚Ä¢ Sch√©mas de liaison √† la terre<br>
                        ‚Ä¢ Dispositifs de protection
                    </div>
                `
            },
            {
                id: 12,
                question: "Comment doivent √™tre prot√©g√©s les circuits des installations ajout√©es par les utilisateurs ?",
                answers: [
                    "Par des fusibles",
                    "Par des disjoncteurs diff√©rentiels haute sensibilit√©",
                    "Par des parafoudres",
                    "Par des sectionneurs"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "electricity",
                hint: "Article CTS 18, paragraphe 1",
                explanation: "Les circuits doivent √™tre prot√©g√©s par des dispositifs √† courant diff√©rentiel-r√©siduel √† haute sensibilit√© (30 mA).",
                reference: "Article CTS 18 ¬ß1 : 'Les circuits aliment√©s √† partir de ces tableaux doivent √™tre prot√©g√©s dans tous les cas par des dispositifs de protection √† courant diff√©rentiel-r√©siduel √† haute sensibilit√©.'",
                visualAid: `
                    <div class="schema">
                        <strong>üîí Protection diff√©rentielle :</strong><br>
                        ‚Ä¢ Haute sensibilit√© : 30 mA<br>
                        ‚Ä¢ Obligatoire pour tous circuits<br>
                        ‚Ä¢ Dispositif type S pour amont<br>
                        ‚Ä¢ Test mensuel recommand√©
                    </div>
                `
            },
            {
                id: 13,
                question: "√Ä quelle hauteur minimale doivent √™tre plac√©s les appareils d'√©clairage ?",
                answers: [
                    "2,00 m",
                    "2,25 m",
                    "2,50 m",
                    "2,75 m"
                ],
                correctAnswer: 1,
                level: "student",
                theme: "electricity",
                hint: "Article CTS 21, paragraphe 1",
                explanation: "La partie inf√©rieure des appareils d'√©clairage doit √™tre √† au moins 2,25 m du sol.",
                reference: "Article CTS 21 ¬ß1 : 'Les appareils d'√©clairage ne doivent pas faire obstacle √† la circulation du public ; leur partie inf√©rieure doit √™tre plac√©e √† une hauteur minimale de 2,25 m√®tres au-dessus des emplacements accessible au public.'",
                visualAid: `
                    <div class="schema">
                        <strong>üìè Hauteur des luminaires :</strong><br>
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br>
                        ‚îÇ               ‚îÇ<br>
                        ‚îÇ   Luminaire   ‚îÇ<br>
                        ‚îÇ               ‚îÇ<br>
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò<br>
                        ‚îÇ<br>
                        ‚îÇ 2,25 m minimum<br>
                        ‚îÇ<br>
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê<br>
                        ‚îÇ    Sol        ‚îÇ<br>
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    </div>
                `
            },
            {
                id: 14,
                question: "Combien de circuits minimum pour l'√©clairage normal ?",
                answers: [
                    "1 circuit",
                    "2 circuits",
                    "3 circuits",
                    "4 circuits"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "electricity",
                hint: "Article CTS 21, paragraphe 2",
                explanation: "L'√©clairage normal doit √™tre aliment√© par au moins deux circuits prot√©g√©s s√©lectivement.",
                reference: "Article CTS 21 ¬ß2 : 'L'installation de l'√©clairage normal doit √™tre aliment√©e par au moins deux circuits prot√©g√©s s√©lectivement contre les surintensit√©s et contre les contacts indirects.'",
                visualAid: `
                    <div class="schema">
                        <strong>üîå Circuits d'√©clairage :</strong><br>
                        Tableau principal<br>
                        ‚îú‚îÄ‚îÄ Circuit 1 (Nord/Est)<br>
                        ‚îî‚îÄ‚îÄ Circuit 2 (Sud/Ouest)<br><br>
                        ‚Ä¢ S√©lectivit√© des protections<br>
                        ‚Ä¢ Redondance en cas de panne
                    </div>
                `
            },
            {
                id: 15,
                question: "Quelle norme pour les guirlandes √©lectriques ?",
                answers: [
                    "NF EN 60598-1",
                    "NF EN 60598-2-20",
                    "NF EN 61347",
                    "NF EN 62031"
                ],
                correctAnswer: 1,
                level: "expert",
                theme: "electricity",
                hint: "Article CTS 19, paragraphe 2",
                explanation: "Les guirlandes √©lectriques doivent r√©pondre √† la norme NF EN 60598-2-20.",
                reference: "Article CTS 19 ¬ß2 : 'Les guirlandes √©lectriques doivent r√©pondre aux dispositions de la norme NF EN 60598-2-20.'",
                visualAid: `
                    <div class="schema">
                        <strong>‚ú® Norme guirlandes :</strong><br>
                        NF EN 60598-2-20 :<br>
                        ‚Ä¢ Protection contre les chocs<br>
                        ‚Ä¢ R√©sistance m√©canique<br>
                        ‚Ä¢ Temp√©rature admissible<br>
                        ‚Ä¢ Marquage CE obligatoire
                    </div>
                `
            },

            // TH√àME : S√âCURIT√â (10 questions)
            {
                id: 16,
                question: "Quel flux lumineux minimal pour l'√©clairage d'ambiance ?",
                answers: [
                    "3 lumens/m¬≤",
                    "5 lumens/m¬≤",
                    "7 lumens/m¬≤",
                    "10 lumens/m¬≤"
                ],
                correctAnswer: 1,
                level: "student",
                theme: "safety",
                hint: "Article CTS 22, paragraphe 2",
                explanation: "L'√©clairage d'ambiance doit fournir 5 lumens/m¬≤ minimum sur la surface des circulations.",
                reference: "Article CTS 22 ¬ß2 : 'L'√©clairage d'ambiance doit √™tre bas√© sur un flux lumineux minimal de cinq lumens par m√®tre carr√© calcul√© en fonction de la surface des circulations.'",
                visualAid: `
                    <div class="schema">
                        <strong>üí° Calcul du flux lumineux :</strong><br>
                        Surface circulation : 100 m¬≤<br>
                        Flux n√©cessaire : 5 √ó 100 = 500 lm<br><br>
                        Exemple :<br>
                        10 blocs de 50 lm = 500 lm
                    </div>
                `
            },
            {
                id: 17,
                question: "Quelle autonomie minimale pour la source de s√©curit√© ?",
                answers: [
                    "30 minutes",
                    "45 minutes",
                    "60 minutes",
                    "90 minutes"
                ],
                correctAnswer: 2,
                level: "pro",
                theme: "safety",
                hint: "Article CTS 24, paragraphe 2",
                explanation: "La source de s√©curit√© (groupe ou batteries) doit assurer une autonomie minimale d'une heure.",
                reference: "Article CTS 24 ¬ß2 : 'La source de s√©curit√© (groupe √©lectrog√®ne ou source centralis√©e constitu√©e d'une batterie d'accumulateurs) doit assurer une autonomie minimale d'une heure.'",
                visualAid: `
                    <div class="schema">
                        <strong>üîã Autonomie s√©curit√© :</strong><br>
                        Dur√©e : 1 heure minimum<br>
                        Options :<br>
                        ‚Ä¢ Groupes √©lectrog√®nes<br>
                        ‚Ä¢ Batteries d'accumulateurs<br>
                        ‚Ä¢ Chargeur automatique
                    </div>
                `
            },
            {
                id: 18,
                question: "Quel type d'extincteur est exig√© √† chaque sortie ?",
                answers: [
                    "Extincteur √† CO2 2 kg",
                    "Extincteur √† poudre 6 kg",
                    "Extincteur √† eau pulv√©ris√©e 6 L",
                    "Extincteur √† mousse 9 L"
                ],
                correctAnswer: 2,
                level: "student",
                theme: "safety",
                hint: "Article CTS 26, paragraphe 1",
                explanation: "Un extincteur portatif √† eau pulv√©ris√©e de 6 L minimum par sortie.",
                reference: "Article CTS 26 ¬ß1 : 'La d√©fense contre l'incendie doit √™tre assur√©e : par des extincteurs portatifs √† eau pulv√©ris√©e, de 6 litres minimum, bien visibles, facilement accessibles et rapidement d√©crochables, √† raison d'un appareil par sortie.'",
                visualAid: `
                    <div class="schema">
                        <strong>üßØ Extincteurs obligatoires :</strong><br>
                        Par sortie : 1 extincteur eau 6L<br>
                        Risques particuliers : extincteurs adapt√©s<br>
                        Signalisation : visible<br>
                        Accessibilit√© : facile
                    </div>
                    <div class="example">
                        <strong>‚úÖ Installation :</strong><br>
                        ‚Ä¢ Hauteur 1 √† 1,30 m<br>
                        ‚Ä¢ Pas d'obstacle devant<br>
                        ‚Ä¢ Signalisation permanente<br>
                        ‚Ä¢ V√©rification annuelle
                    </div>
                `
            },
            {
                id: 19,
                question: "√Ä partir de quel effectif faut-il un syst√®me de sonorisation pour l'alarme ?",
                answers: [
                    "300 personnes",
                    "500 personnes",
                    "700 personnes",
                    "1000 personnes"
                ],
                correctAnswer: 2,
                level: "pro",
                theme: "safety",
                hint: "Article CTS 28, paragraphe 2",
                explanation: "Pour plus de 700 personnes, l'alarme doit √™tre diffus√©e par un syst√®me de sonorisation permettant une diffusion verbale audible de tout point.",
                reference: "Article CTS 28 ¬ß2 : 'Dans les √©tablissements recevant plus de 700 personnes, la diffusion de l'alarme g√©n√©rale doit √™tre obtenue √† partir d'un syst√®me de sonorisation permettant une diffusion verbale audible de tout point de l'√©tablissement.'",
                visualAid: `
                    <div class="schema">
                        <strong>üì¢ Syst√®me d'alarme :</strong><br>
                        < 700 personnes : moyen sonore simple<br>
                        > 700 personnes : sonorisation obligatoire<br>
                        Options :<br>
                        ‚Ä¢ Syst√®me fixe avec secours<br>
                        ‚Ä¢ M√©gaphone autonome
                    </div>
                `
            },
            {
                id: 20,
                question: "Combien d'agents de s√©curit√© pour un √©tablissement de 3000 personnes avec espace sc√©nique ?",
                answers: [
                    "1 agent",
                    "2 agents",
                    "3 agents",
                    "4 agents"
                ],
                correctAnswer: 2,
                level: "expert",
                theme: "safety",
                hint: "Article CTS 27, paragraphe 1-c",
                explanation: "Pour plus de 2500 personnes avec espace sc√©nique : minimum 3 agents de s√©curit√© incendie.",
                reference: "Article CTS 27 ¬ß1-c : 'Etablissements recevant plus de 2 500 personnes et comportant un espace sc√©nique : par des agents de s√©curit√© incendie fournis par l'organisateur avec un minimum de trois.'",
                visualAid: `
                    <div class="schema">
                        <strong>üë∑ Effectifs s√©curit√© :</strong><br>
                        ‚Ä¢ ‚â§ 2500 pers : 1-2 agents<br>
                        ‚Ä¢ > 2500 pers sans sc√®ne : 2 agents min<br>
                        ‚Ä¢ > 2500 pers avec sc√®ne : 3 agents min<br>
                        ‚Ä¢ +1 agent par 2500 pers suppl√©mentaires
                    </div>
                `
            },

            // QUESTIONS SUPPLEMENTAIRES
            {
                id: 21,
                question: "Quelle est la fr√©quence de la v√©rification p√©riodique des √©tablissements CTS ?",
                answers: [
                    "Annuelle",
                    "Tous les 2 ans",
                    "Tous les 3 ans",
                    "Tous les 5 ans"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "general",
                hint: "Article CTS 34, paragraphe 1",
                explanation: "V√©rification technique tous les 2 ans par un organisme agr√©√© CTS.",
                reference: "Article CTS 34 ¬ß1 : 'Des v√©rifications techniques et documentaires sont effectu√©es tous les deux ans par un organisme agr√©√© de v√©rification technique CTS.'",
                visualAid: null
            },
            {
                id: 22,
                question: "Quelle distance minimale entre un CTS et un b√¢timent √† risques particuliers ?",
                answers: [
                    "4 m√®tres",
                    "6 m√®tres",
                    "8 m√®tres",
                    "10 m√®tres"
                ],
                correctAnswer: 2,
                level: "expert",
                theme: "construction",
                hint: "Article CTS 39",
                explanation: "Distance minimale de 8 m√®tres pour un √©tablissement √† risques particuliers.",
                reference: "Article CTS 39 : 'l'√©tablissement doit √™tre implant√© √† plus de : huit m√®tres d'un autre b√¢timent ou d'une autre structure si l'un au moins des deux √©tablissements est √† risques particuliers.'",
                visualAid: null
            },
            {
                id: 23,
                question: "Quelle est la largeur minimale des circulations entre rang√©es de si√®ges ?",
                answers: [
                    "0,90 m",
                    "1,00 m",
                    "1,20 m",
                    "1,40 m"
                ],
                correctAnswer: 2,
                level: "student",
                theme: "construction",
                hint: "Article CTS 11, paragraphe 2",
                explanation: "Les circulations doivent avoir une largeur minimale de 1,20 m.",
                reference: "Article CTS 11 ¬ß2 : 'Les si√®ges doivent √™tre dispos√©s de mani√®re √† former des ensembles desservis par des circulations ayant une largeur minimale de 1,20 m√®tre.'",
                visualAid: null
            },
            {
                id: 24,
                question: "Quelle cat√©gorie de mat√©riaux pour les d√©cors sc√©niques ?",
                answers: [
                    "M0",
                    "M1",
                    "M2",
                    "M3"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "construction",
                hint: "Article CTS 13, paragraphe 1",
                explanation: "Les d√©cors pour am√©nagements sc√©niques doivent √™tre en mat√©riaux de cat√©gorie M1.",
                reference: "Article CTS 13 ¬ß1 : 'Les d√©cors pour am√©nagements sc√©niques doivent √™tre r√©alis√©s en mat√©riaux de cat√©gorie M 1.'",
                visualAid: null
            },
            {
                id: 25,
                question: "Quelle est la capacit√© maximale de stockage de gaz par emplacement ?",
                answers: [
                    "100 kg",
                    "150 kg",
                    "210 kg",
                    "300 kg"
                ],
                correctAnswer: 2,
                level: "expert",
                theme: "safety",
                hint: "Article CTS 15, paragraphe 5",
                explanation: "Le stockage est limit√© √† 210 kg par emplacement, avec distance de 10 m entre emplacements.",
                reference: "Article CTS 15 ¬ß5 : 'Il doit √™tre situ√© √† une distance minimale de 3 m√®tres de l'√©tablissement et il est limit√© √† 210 kilogrammes par emplacement.'",
                visualAid: null
            },
            {
                id: 26,
                question: "Quel d√©lai maximal pour la mise en service d'un groupe √©lectrog√®ne de secours ?",
                answers: [
                    "5 secondes",
                    "10 secondes",
                    "15 secondes",
                    "30 secondes"
                ],
                correctAnswer: 2,
                level: "expert",
                theme: "electricity",
                hint: "Article CTS 24, paragraphe 5",
                explanation: "Le groupe doit pouvoir prendre en charge les circuits en moins de 15 secondes.",
                reference: "Article CTS 24 ¬ß5 : 'celui-ci peut √™tre arr√™t√© en position d'attente sous r√©serve de pouvoir prendre automatiquement en charge la totalit√© des circuits dans un d√©lai maximal de 15 secondes.'",
                visualAid: null
            },
            {
                id: 27,
                question: "Quelle doit √™tre la premi√®re action lors du d√©clenchement de l'alarme ?",
                answers: [
                    "√âvacuer imm√©diatement",
                    "Appeler les pompiers",
                    "Arr√™ter la diffusion sonore",
                    "Allumer l'√©clairage de s√©curit√©"
                ],
                correctAnswer: 2,
                level: "pro",
                theme: "safety",
                hint: "Article CTS 28, paragraphe 3",
                explanation: "L'alarme doit √™tre pr√©c√©d√©e de l'arr√™t de la diffusion sonore et, si possible, du r√©tablissement de l'√©clairage normal.",
                reference: "Article CTS 28 ¬ß3 : 'Le fonctionnement de l'alarme g√©n√©rale doit √™tre pr√©c√©d√© de l'arr√™t de la diffusion sonore et, dans la mesure du possible, du r√©tablissement de l'√©clairage normal.'",
                visualAid: null
            },
            {
                id: 28,
                question: "Quand faut-il une liaison t√©l√©phonique avec les sapeurs-pompiers ?",
                answers: [
                    "Toujours",
                    "√Ä partir de 300 personnes",
                    "√Ä partir de 700 personnes",
                    "√Ä partir de 1000 personnes"
                ],
                correctAnswer: 2,
                level: "pro",
                theme: "safety",
                hint: "Article CTS 29, paragraphe 1",
                explanation: "Une liaison t√©l√©phonique est exig√©e pour les √©tablissements de plus de 700 personnes.",
                reference: "Article CTS 29 ¬ß1 : 'La liaison avec les sapeurs-pompiers doit √™tre r√©alis√©e par t√©l√©phone urbain dans les √©tablissements (ou √† proximit√© des √©tablissements) recevant plus de 700 personnes.'",
                visualAid: null
            },
            {
                id: 29,
                question: "Quelle est la fr√©quence de v√©rification de l'installation √©lectrique ?",
                answers: [
                    "Tous les 6 mois",
                    "Annuelle",
                    "Tous les 2 ans",
                    "Tous les 3 ans"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "electricity",
                hint: "Article CTS 35, paragraphe 1",
                explanation: "V√©rification annuelle en alternance pour les installations √©lectriques.",
                reference: "Article CTS 35 ¬ß1 : 'L'ensemble des installations √©lectriques propres √† l'√©tablissement est v√©rifi√© annuellement, en alternance, par des personnes ou des organismes agr√©√©s et par des techniciens comp√©tents.'",
                visualAid: null
            },
            {
                id: 30,
                question: "Combien de niveaux maximum pour une structure √† √©tage ?",
                answers: [
                    "1 niveau",
                    "2 niveaux",
                    "3 niveaux",
                    "4 niveaux"
                ],
                correctAnswer: 1,
                level: "student",
                theme: "construction",
                hint: "Article CTS 53, paragraphe 1",
                explanation: "Maximum 2 niveaux pour les structures √† √©tage.",
                reference: "Article CTS 53 ¬ß1 : 'Les dispositions du pr√©sent sous chapitre ne s'appliquent qu'aux √©tablissements itin√©rants [...] comportant deux niveaux au plus.'",
                visualAid: null
            },
            {
                id: 31,
                question: "Quelle largeur minimale pour les sorties d'un √©tablissement de 100 personnes ?",
                answers: [
                    "0,90 m par sortie",
                    "1,00 m par sortie",
                    "1,40 m par sortie",
                    "1,80 m par sortie"
                ],
                correctAnswer: 2,
                level: "student",
                theme: "construction",
                hint: "Article CTS 10, paragraphe 1",
                explanation: "Pour 50 √† 200 personnes : 2 sorties de 1,40 m chacune.",
                reference: "Article CTS 10 ¬ß1 : 'De 50 √† 200 personnes : par deux sorties ayant chacune une largeur de 1,40 m√®tre.'",
                visualAid: null
            },
            {
                id: 32,
                question: "Quelle est la dur√©e d'implantation maximale pour les √©tablissements √† implantation prolong√©e ?",
                answers: [
                    "3 mois",
                    "6 mois",
                    "1 an",
                    "2 ans"
                ],
                correctAnswer: 1,
                level: "expert",
                theme: "general",
                hint: "Article CTS 38",
                explanation: "Les √©tablissements implant√©s plus de 6 mois sont consid√©r√©s √† implantation prolong√©e.",
                reference: "Article CTS 38 : 'Les dispositions du pr√©sent sous-chapitre sont applicables aux √©tablissements clos et itin√©rants [...] qui sont implant√©s pour une dur√©e sup√©rieure √† six mois.'",
                visualAid: null
            },
            {
                id: 33,
                question: "Quelle est la largeur minimale des circulations principales ?",
                answers: [
                    "√âgale √† celle des sorties",
                    "1,20 m minimum",
                    "1,80 m minimum",
                    "2,00 m minimum"
                ],
                correctAnswer: 0,
                level: "pro",
                theme: "construction",
                hint: "Article CTS 11, paragraphe 3",
                explanation: "La largeur des circulations principales doit √™tre √©gale √† celle des sorties correspondantes.",
                reference: "Article CTS 11 ¬ß3 : 'La largeur de ces circulations doit √™tre √©gale √† celle des sorties correspondantes.'",
                visualAid: null
            },
            {
                id: 34,
                question: "Quelle cat√©gorie de mat√©riaux pour les tentures ?",
                answers: [
                    "M0",
                    "M1",
                    "M2",
                    "M3"
                ],
                correctAnswer: 2,
                level: "student",
                theme: "construction",
                hint: "Article CTS 13, paragraphe 1",
                explanation: "Les tentures doivent √™tre r√©alis√©es en mat√©riaux de cat√©gorie M2.",
                reference: "Article CTS 13 ¬ß1 : 'Les tentures doivent √™tre r√©alis√©es en mat√©riaux de cat√©gorie M2.'",
                visualAid: null
            },
            {
                id: 35,
                question: "Quelle est la puissance utile totale maximum pour un g√©n√©rateur accol√© √† la paroi ?",
                answers: [
                    "50 kW",
                    "70 kW",
                    "100 kW",
                    "150 kW"
                ],
                correctAnswer: 1,
                level: "expert",
                theme: "construction",
                hint: "Article CTS 15, paragraphe 1",
                explanation: "Si la puissance utile totale ne d√©passe pas 70 kW, le g√©n√©rateur peut √™tre accol√© √† la paroi.",
                reference: "Article CTS 15 ¬ß1 : 'Si la puissance utile totale install√©e ne d√©passe pas 70 kW, le ou les appareils peuvent √™tre accol√©s √† la paroi ext√©rieure de l'√©tablissement.'",
                visualAid: null
            },
            {
                id: 36,
                question: "Quelle distance minimale entre le stockage de gaz et l'√©tablissement ?",
                answers: [
                    "1 m√®tre",
                    "3 m√®tres",
                    "5 m√®tres",
                    "10 m√®tres"
                ],
                correctAnswer: 1,
                level: "pro",
                theme: "safety",
                hint: "Article CTS 15, paragraphe 5",
                explanation: "Le stockage de gaz doit √™tre √† 3 m√®tres minimum de l'√©tablissement.",
                reference: "Article CTS 15 ¬ß5 : 'Il doit √™tre situ√© √† une distance minimale de 3 m√®tres de l'√©tablissement.'",
                visualAid: null
            },
            {
                id: 37,
                question: "Quelle norme pour les blocs autonomes d'√©clairage de s√©curit√© ?",
                answers: [
                    "NF C 71-700",
                    "NF C 71-800",
                    "NF C 71-900",
                    "NF C 71-1000"
                ],
                correctAnswer: 1,
                level: "expert",
                theme: "electricity",
                hint: "Article CTS 23, paragraphe 1",
                explanation: "Les blocs doivent √™tre conformes √† la norme NF C 71-800.",
                reference: "Article CTS 23 ¬ß1 : 'L'√©clairage de s√©curit√© par blocs autonomes doit √™tre r√©alis√© par des appareils conformes √† la norme de la s√©rie NF C 71-800.'",
                visualAid: null
            },
            {
                id: 38,
                question: "Quelle est la composition minimale du service de s√©curit√© pour 800 personnes ?",
                answers: [
                    "1 personne instruite",
                    "2 agents de s√©curit√©",
                    "3 agents de s√©curit√©",
                    "4 agents de s√©curit√©"
                ],
                correctAnswer: 0,
                level: "pro",
                theme: "safety",
                hint: "Article CTS 27, paragraphe 1-a",
                explanation: "Pour jusqu'√† 2500 personnes : personnes instruites en s√©curit√© incendie.",
                reference: "Article CTS 27 ¬ß1-a : 'Etablissements recevant 2 500 personnes au plus : par des personnes instruites en s√©curit√© incendie et fournies par l'organisateur.'",
                visualAid: null
            },
            {
                id: 39,
                question: "Quel est le contenu minimal du rapport de v√©rification p√©riodique ?",
                answers: [
                    "Un simple constat",
                    "Les √©l√©ments des annexes VI ou VII",
                    "Une liste d'observations",
                    "Un avis favorable ou d√©favorable"
                ],
                correctAnswer: 1,
                level: "expert",
                theme: "general",
                hint: "Article CTS 36, paragraphe 1",
                explanation: "Le rapport doit comprendre au minimum les √©l√©ments mentionn√©s dans les annexes VI ou VII.",
                reference: "Article CTS 36 ¬ß1 : 'Le rapport de v√©rification p√©riodique doit comprendre au minimum les √©l√©ments mentionn√©s dans les annexes VI ou VII.'",
                visualAid: null
            },
            {
                id: 40,
                question: "Quelle est la superficie minimale pour les petits √©tablissements ?",
                answers: [
                    "8 m¬≤",
                    "16 m¬≤",
                    "25 m¬≤",
                    "50 m¬≤"
                ],
                correctAnswer: 1,
                level: "student",
                theme: "general",
                hint: "Article CTS 37",
                explanation: "Tout √©tablissement vis√© √† l'article CTS 1 ¬ß3 doit respecter les dispositions de l'article CTS 37.",
                reference: "Article CTS 37 : 'Tout √©tablissement vis√© √† l'article CTS 1 (¬ß3) doit respecter l'ensemble des dispositions suivantes...'",
                visualAid: null
            }
        ];

        // VARIABLES GLOBALES
        let quizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let correctAnswers = 0;
        let startTime = Date.now();
        let timerInterval;
        let timePerQuestion = [];
        let currentQuestionStartTime = Date.now();

        // CONFIGURATION - TOUTES LES OPTIONS SONT VIDES PAR D√âFAUT
        let selectedQuestionsCount = 0;
        let selectedLevel = null;
        let selectedThemes = [];

        // INITIALISATION
        document.addEventListener('DOMContentLoaded', function () {
            initConfig();
            initNavigation();
            initQuizControls();
        });

        // INITIALISER LA CONFIGURATION
        function initConfig() {
            // Configuration par d√©faut - tout est vide
            updateConfigSummary();

            // Options de nombre de questions
            const questionOptions = [
                { count: 10, time: "5-7 min" },
                { count: 20, time: "10-15 min" },
                { count: 30, time: "15-20 min" },
                { count: 40, time: "20-25 min" }
            ];

            const questionContainer = document.getElementById('questionCountOptions');
            questionContainer.innerHTML = '';

            questionOptions.forEach(option => {
                const div = document.createElement('div');
                div.className = `question-option flex items-center justify-between p-3 border border-stone-200 rounded-lg cursor-pointer hover:bg-stone-50`;
                div.dataset.questions = option.count;
                div.innerHTML = `
                    <div>
                        <div class="font-medium">${option.count} questions</div>
                        <div class="text-xs text-stone-500">${option.time}</div>
                    </div>
                    <div class="selector-circle"></div>
                `;

                div.addEventListener('click', () => {
                    document.querySelectorAll('.question-option').forEach(opt => {
                        opt.classList.remove('selected');
                        const circle = opt.querySelector('.selector-circle');
                        if (circle) {
                            circle.style.borderColor = '#d6d3d1';
                            circle.style.backgroundColor = 'transparent';
                        }
                    });
                    
                    div.classList.add('selected');
                    const circle = div.querySelector('.selector-circle');
                    if (circle) {
                        circle.style.borderColor = '#ea580c';
                        circle.style.backgroundColor = '#ea580c';
                    }
                    selectedQuestionsCount = option.count;
                    updateConfigSummary();
                    updateStartButtonState();
                });

                questionContainer.appendChild(div);
            });

            // Options de niveau
            const levelOptions = [
                { id: "student", name: "√âtudiant", desc: "Bases r√©glementaires" },
                { id: "pro", name: "Professionnel", desc: "Pratique op√©rationnelle" },
                { id: "expert", name: "Expert", desc: "Jurisprudence & d√©rogations" }
            ];

            const levelContainer = document.getElementById('levelOptions');
            levelContainer.innerHTML = '';

            levelOptions.forEach(option => {
                const div = document.createElement('div');
                div.className = `level-option flex items-center justify-between p-3 border border-stone-200 rounded-lg cursor-pointer hover:bg-stone-50`;
                div.dataset.level = option.id;
                div.innerHTML = `
                    <div>
                        <div class="font-medium">${option.name}</div>
                        <div class="text-xs text-stone-500">${option.desc}</div>
                    </div>
                    <div class="selector-circle"></div>
                `;

                div.addEventListener('click', () => {
                    document.querySelectorAll('.level-option').forEach(opt => {
                        opt.classList.remove('selected');
                        const circle = opt.querySelector('.selector-circle');
                        if (circle) {
                            circle.style.borderColor = '#d6d3d1';
                            circle.style.backgroundColor = 'transparent';
                        }
                    });
                    
                    div.classList.add('selected');
                    const circle = div.querySelector('.selector-circle');
                    if (circle) {
                        circle.style.borderColor = '#ea580c';
                        circle.style.backgroundColor = '#ea580c';
                    }
                    selectedLevel = option.id;
                    updateConfigSummary();
                    updateStartButtonState();
                });

                levelContainer.appendChild(div);
            });

            // Options de th√®mes
            const themeOptions = [
                { id: "general", name: "G√©n√©ralit√©s", icon: "fas fa-book" },
                { id: "construction", name: "Construction", icon: "fas fa-hammer" },
                { id: "electricity", name: "√âlectricit√©", icon: "fas fa-bolt" },
                { id: "safety", name: "S√©curit√©", icon: "fas fa-shield-alt" }
            ];

            const themeContainer = document.getElementById('themeOptions');
            themeContainer.innerHTML = '';

            themeOptions.forEach(option => {
                const div = document.createElement('div');
                div.className = `theme-option flex items-center justify-between p-3 border border-stone-200 rounded-lg cursor-pointer hover:bg-stone-50`;
                div.dataset.theme = option.id;
                div.innerHTML = `
                    <div class="flex items-center">
                        <i class="${option.icon} mr-3 text-stone-500"></i>
                        <span class="font-medium">${option.name}</span>
                    </div>
                    <i class="fas fa-plus text-stone-400"></i>
                `;

                div.addEventListener('click', () => {
                    div.classList.toggle('selected');
                    
                    const firstIcon = div.querySelector('i:first-child');
                    const span = div.querySelector('span');
                    const lastIcon = div.querySelector('i:last-child');
                    
                    if (div.classList.contains('selected')) {
                        div.style.borderColor = '#059669';
                        div.style.backgroundColor = '#f0fdf4';
                        
                        if (firstIcon) {
                            firstIcon.style.color = '#059669';
                        }
                        if (span) {
                            span.style.color = '#065f46';
                            span.style.fontWeight = '500';
                        }
                        if (lastIcon) {
                            lastIcon.className = 'fas fa-check';
                            lastIcon.style.color = '#059669';
                        }
                        
                        if (!selectedThemes.includes(option.id)) {
                            selectedThemes.push(option.id);
                        }
                    } else {
                        div.style.borderColor = '';
                        div.style.backgroundColor = '';
                        
                        if (firstIcon) {
                            firstIcon.style.color = '#a8a29e';
                        }
                        if (span) {
                            span.style.color = '';
                            span.style.fontWeight = '';
                        }
                        if (lastIcon) {
                            lastIcon.className = 'fas fa-plus';
                            lastIcon.style.color = '#a8a29e';
                        }
                        
                        selectedThemes = selectedThemes.filter(t => t !== option.id);
                    }
                    updateConfigSummary();
                    updateStartButtonState();
                });

                themeContainer.appendChild(div);
            });
        }

        // METTRE √Ä JOUR LE R√âSUM√â DE CONFIGURATION
        function updateConfigSummary() {
            document.getElementById('summaryQuestions').textContent = selectedQuestionsCount || '0';

            let levelText = 'Non s√©lectionn√©';
            if (selectedLevel === "student") levelText = "√âtudiant";
            else if (selectedLevel === "pro") levelText = "Professionnel";
            else if (selectedLevel === "expert") levelText = "Expert";
            document.getElementById('summaryLevel').textContent = levelText;

            document.getElementById('summaryThemes').textContent = `${selectedThemes.length} s√©lectionn√©${selectedThemes.length !== 1 ? 's' : ''}`;

            // Temps estim√©
            let estimatedTime = "--";
            if (selectedQuestionsCount === 10) estimatedTime = "5-7 minutes";
            else if (selectedQuestionsCount === 20) estimatedTime = "10-15 minutes";
            else if (selectedQuestionsCount === 30) estimatedTime = "15-20 minutes";
            else if (selectedQuestionsCount === 40) estimatedTime = "20-25 minutes";
            document.getElementById('estimatedTime').textContent = estimatedTime;
        }

        // METTRE √Ä JOUR L'√âTAT DU BOUTON DE D√âMARRAGE
        function updateStartButtonState() {
            const startBtn = document.getElementById('startBtn');
            const isValid = selectedQuestionsCount > 0 && selectedLevel !== null && selectedThemes.length > 0;

            if (isValid) {
                startBtn.disabled = false;
                startBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                startBtn.disabled = true;
                startBtn.classList.add('opacity-50', 'cursor-not-allowed');
            }
        }

        // INITIALISER LA NAVIGATION
        function initNavigation() {
            // G√©rer le clic sur les boutons de navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    const tabName = this.getAttribute('onclick').match(/switchTab\('([^']+)'\)/)[1];
                    switchTab(tabName);
                });
            });
        }

        // INITIALISER LES CONTR√îLES DU QUIZ
        function initQuizControls() {
            // Bouton pr√©c√©dent
            const prevBtn = document.getElementById('prevBtn');
            if (prevBtn) {
                prevBtn.addEventListener('click', previousQuestion);
            }

            // Bouton suivant/terminer
            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) {
                nextBtn.addEventListener('click', nextQuestionOrFinish);
            }
        }

        // CHANGER D'ONGLET
        function switchTab(tabName) {
            // Cacher tous les onglets
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Afficher l'onglet s√©lectionn√©
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
            }

            // Mettre √† jour la navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active', 'border-orange-600', 'border-emerald-600', 'text-orange-600', 'text-emerald-600');
                btn.style.borderBottomColor = 'transparent';
            });

            // Appliquer le style au bouton actif
            const activeBtn = document.querySelector(`[onclick="switchTab('${tabName}')"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
                if (tabName === 'resultats') {
                    activeBtn.classList.add('border-emerald-600', 'text-emerald-600');
                    activeBtn.style.borderBottomColor = '#059669';
                } else {
                    activeBtn.classList.add('border-orange-600', 'text-orange-600');
                    activeBtn.style.borderBottomColor = '#ea580c';
                }
            }

            // Si on passe √† l'onglet r√©sultats, afficher les r√©sultats
            if (tabName === 'resultats') {
                showResults();
            }
        }

        // D√âMARRER LE QUIZ
        function startQuiz() {
            // V√©rifier la configuration
            if (selectedQuestionsCount === 0) {
                alert("Veuillez s√©lectionner un nombre de questions.");
                return;
            }

            if (selectedLevel === null) {
                alert("Veuillez s√©lectionner un niveau de difficult√©.");
                return;
            }

            if (selectedThemes.length === 0) {
                alert("Veuillez s√©lectionner au moins un th√®me.");
                return;
            }

            // Pr√©parer les questions selon la configuration
            prepareQuizQuestions();

            // V√©rifier qu'on a assez de questions
            if (quizQuestions.length < selectedQuestionsCount) {
                alert(`Seulement ${quizQuestions.length} questions disponibles avec cette configuration. Veuillez s√©lectionner plus de th√®mes ou un niveau diff√©rent.`);
                return;
            }

            // Initialiser les variables
            currentQuestionIndex = 0;
            userAnswers = new Array(quizQuestions.length).fill(null);
            correctAnswers = 0;
            timePerQuestion = new Array(quizQuestions.length).fill(0);
            startTime = Date.now();
            currentQuestionStartTime = Date.now();

            // Changer d'onglet
            switchTab('quiz');

            // Charger la premi√®re question
            loadQuestion();
            startTimer();
            updateStats();
            updateProgress();
        }

        // PR√âPARER LES QUESTIONS DU QUIZ
        function prepareQuizQuestions() {
            // Filtrer les questions selon les crit√®res
            let filteredQuestions = allQuestions.filter(q =>
                selectedThemes.includes(q.theme) &&
                q.level === selectedLevel
            );

            // Si pas assez de questions, prendre toutes les questions des th√®mes s√©lectionn√©s
            if (filteredQuestions.length < selectedQuestionsCount) {
                filteredQuestions = allQuestions.filter(q =>
                    selectedThemes.includes(q.theme)
                );
            }

            // Si toujours pas assez, prendre toutes les questions
            if (filteredQuestions.length < selectedQuestionsCount) {
                filteredQuestions = [...allQuestions];
            }

            // M√©langer les questions
            filteredQuestions = shuffleArray(filteredQuestions);

            // Prendre le nombre demand√©
            quizQuestions = filteredQuestions.slice(0, selectedQuestionsCount);
        }

        // M√âLANGE DES QUESTIONS
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // CHARGER LA QUESTION
        function loadQuestion() {
            const question = quizQuestions[currentQuestionIndex];

            // Mettre √† jour le texte de la question
            document.getElementById('questionText').textContent = question.question;

            // Mettre √† jour le th√®me
            const themeText = question.theme === "general" ? "G√âN√âRALIT√âS" :
                question.theme === "construction" ? "CONSTRUCTION" :
                    question.theme === "electricity" ? "√âLECTRICIT√â" : "S√âCURIT√â";
            document.getElementById('questionTheme').textContent = themeText;

            // Mettre √† jour les indicateurs de difficult√©
            const difficultyDots = document.querySelectorAll('#questionText ~ div .flex.space-x-1 div');
            difficultyDots.forEach((dot, index) => {
                if (question.level === "student" && index < 1) {
                    dot.className = 'w-3 h-3 rounded-full bg-orange-500';
                } else if (question.level === "pro" && index < 2) {
                    dot.className = 'w-3 h-3 rounded-full bg-orange-500';
                } else if (question.level === "expert" && index < 3) {
                    dot.className = 'w-3 h-3 rounded-full bg-orange-500';
                } else {
                    dot.className = 'w-3 h-3 rounded-full bg-stone-300';
                }
            });

            // Mettre √† jour les options de r√©ponse
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';

            question.answers.forEach((answer, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = `quiz-option p-4 border-2 border-stone-200 rounded-lg cursor-pointer transition-all ${userAnswers[currentQuestionIndex] === index ? 'selected' : ''}`;
                optionDiv.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-8 h-8 flex items-center justify-center rounded-full border border-stone-300 mr-4 font-medium">
                            ${String.fromCharCode(65 + index)}
                        </div>
                        <div class="flex-1">${answer}</div>
                        ${userAnswers[currentQuestionIndex] === index ? '<i class="fas fa-check ml-2 text-emerald-600"></i>' : ''}
                    </div>
                `;

                optionDiv.addEventListener('click', () => {
                    if (userAnswers[currentQuestionIndex] === null) {
                        selectAnswer(index);
                    }
                });

                optionsContainer.appendChild(optionDiv);
            });

            // Mettre √† jour les aides
            document.getElementById('hintText').textContent = question.hint;
            document.getElementById('referenceText').textContent = question.reference;

            // Cacher les conteneurs d'aide
            document.getElementById('hintContainer').classList.add('hidden');
            document.getElementById('feedbackContainer').classList.add('hidden');
            document.getElementById('caseStudyContainer').classList.add('hidden');
            document.getElementById('referenceContainer').classList.add('hidden');

            // Si une r√©ponse a d√©j√† √©t√© donn√©e, montrer le r√©sultat
            if (userAnswers[currentQuestionIndex] !== null) {
                showQuestionResult();
            }

            // Mettre √† jour les boutons de navigation
            updateNavigationButtons();

            // Mettre √† jour les statistiques
            updateStats();
            updateProgress();

            // Enregistrer le temps de d√©but
            currentQuestionStartTime = Date.now();
        }

        // S√âLECTIONNER UNE R√âPONSE
        function selectAnswer(answerIndex) {
            const question = quizQuestions[currentQuestionIndex];
            userAnswers[currentQuestionIndex] = answerIndex;

            // Calculer le temps pass√© sur cette question
            const timeSpent = Math.floor((Date.now() - currentQuestionStartTime) / 1000);
            timePerQuestion[currentQuestionIndex] = timeSpent;

            // V√©rifier si la r√©ponse est correcte
            const isCorrect = (answerIndex === question.correctAnswer);

            // Mettre √† jour le compteur de bonnes r√©ponses
            if (isCorrect) {
                correctAnswers++;
            }

            // Afficher le r√©sultat
            showQuestionResult();

            // Mettre √† jour les statistiques
            updateStats();
            updateProgress();
        }

        // AFFICHER LE R√âSULTAT DE LA QUESTION
        function showQuestionResult() {
            const question = quizQuestions[currentQuestionIndex];
            const userAnswer = userAnswers[currentQuestionIndex];

            if (userAnswer === null) return;

            // Mettre √† jour toutes les options
            const options = document.querySelectorAll('.quiz-option');
            options.forEach((option, index) => {
                // R√©initialiser les classes
                option.classList.remove('selected', 'correct', 'incorrect');

                // Marquer la r√©ponse de l'utilisateur
                if (index === userAnswer) {
                    option.classList.add('selected');
                }

                // Marquer les bonnes/mauvaises r√©ponses
                if (index === question.correctAnswer) {
                    option.classList.add('correct');
                } else if (index === userAnswer && index !== question.correctAnswer) {
                    option.classList.add('incorrect');
                }

                // D√©sactiver le clic
                option.style.pointerEvents = 'none';
            });

            // Afficher le feedback
            const feedbackContainer = document.getElementById('feedbackContainer');
            const isCorrect = (userAnswer === question.correctAnswer);

            feedbackContainer.innerHTML = `
                <div class="p-4 rounded-lg ${isCorrect ? 'bg-emerald-50 border border-emerald-200' : 'bg-red-50 border border-red-200'}">
                    <div class="flex items-start">
                        <i class="fas ${isCorrect ? 'fa-check-circle text-emerald-600' : 'fa-times-circle text-red-600'} text-xl mr-3 mt-1"></i>
                        <div>
                            <h4 class="font-bold ${isCorrect ? 'text-emerald-800' : 'text-red-800'} mb-1">
                                ${isCorrect ? 'Bonne r√©ponse !' : 'R√©ponse incorrecte'}
                            </h4>
                            <p class="${isCorrect ? 'text-emerald-700' : 'text-red-700'}">${question.explanation}</p>
                        </div>
                    </div>
                </div>
            `;
            feedbackContainer.classList.remove('hidden');

            // Afficher la r√©f√©rence
            document.getElementById('referenceContainer').classList.remove('hidden');
        }

        // AFFICHER UN INDICE
        function showHint() {
            document.getElementById('hintContainer').classList.toggle('hidden');
        }

        // QUESTION SUIVANTE OU TERMINER
        function nextQuestionOrFinish() {
            // On v√©rifie si c'est la derni√®re question
            if (currentQuestionIndex < quizQuestions.length - 1) {
                // Question suivante
                currentQuestionIndex++;
                loadQuestion();
            } else {
                // Derni√®re question, terminer le quiz
                finishQuiz();
            }
        }
        // QUESTION PR√âC√âDENTE
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        // METTRE √Ä JOUR LES STATISTIQUES
        function updateStats() {
            const answered = userAnswers.filter(a => a !== null).length;

            document.getElementById('currentQuestion').textContent = `${currentQuestionIndex + 1}/${quizQuestions.length}`;
            document.getElementById('correctAnswers').textContent = correctAnswers;

            const percentage = quizQuestions.length > 0 ? Math.round((correctAnswers / quizQuestions.length) * 100) : 0;
            document.getElementById('scorePercentage').textContent = `${percentage}%`;

            document.getElementById('questionsLeft').textContent = quizQuestions.length - answered;
        }

        // METTRE √Ä JOUR LA PROGRESSION
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${Math.round(progress)}%`;
        }

        // METTRE √Ä JOUR LES BOUTONS DE NAVIGATION
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            prevBtn.disabled = currentQuestionIndex === 0;

            if (currentQuestionIndex === quizQuestions.length - 1) {
                nextBtn.innerHTML = 'Terminer <i class="fas fa-flag-checkered ml-2"></i>';
            } else {
                nextBtn.innerHTML = 'Suivant <i class="fas fa-arrow-right ml-2"></i>';
            }
        }

        // D√âMARRER LE TIMER
        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('totalTimeTaken').textContent =
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // TERMINER LE QUIZ
        function finishQuiz() {
            clearInterval(timerInterval);

            // Calculer les r√©sultats
            const totalCorrect = correctAnswers;
            const percentage = Math.round((totalCorrect / quizQuestions.length) * 100);
            const totalTime = Math.floor((Date.now() - startTime) / 1000);
            const totalTimeSeconds = timePerQuestion.reduce((a, b) => a + b, 0);
            const avgTime = quizQuestions.length > 0 ? Math.round(totalTimeSeconds / quizQuestions.length) : 0;

            // Mettre √† jour les valeurs des r√©sultats
            document.getElementById('finalScorePercentage').textContent = `${percentage}%`;
            document.getElementById('totalCorrectAnswers').textContent = totalCorrect;

            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            document.getElementById('totalTimeTaken').textContent =
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            document.getElementById('averageTime').textContent = `${avgTime}s`;

            // Mettre √† jour le certificat
            document.getElementById('certificateScore').textContent = `${percentage}%`;
            document.getElementById('certificateDate').textContent = new Date().toLocaleDateString('fr-FR');

            // Cr√©er le graphique de performance
            createPerformanceChart();

            // G√©n√©rer les recommandations
            generateAdviceList(percentage);

            // Afficher les r√©sultats
            document.getElementById('resultsContainer').classList.remove('hidden');
            document.getElementById('noResultsMessage').classList.add('hidden');

            // Changer d'onglet
            switchTab('resultats');
        }

        // AFFICHER LES R√âSULTATS
        function showResults() {
            // Si le quiz n'a pas √©t√© fait, montrer le message
            if (quizQuestions.length === 0) {
                document.getElementById('resultsContainer').classList.add('hidden');
                document.getElementById('noResultsMessage').classList.remove('hidden');
            } else {
                document.getElementById('resultsContainer').classList.remove('hidden');
                document.getElementById('noResultsMessage').classList.add('hidden');
            }
        }

        // CR√âER LE GRAPHIQUE DE PERFORMANCE
        function createPerformanceChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');

            // Calculer les statistiques par th√®me
            const themeStats = {};
            userAnswers.forEach((answer, index) => {
                const question = quizQuestions[index];
                const theme = question.theme;
                const isCorrect = (answer === question.correctAnswer);

                if (!themeStats[theme]) {
                    themeStats[theme] = { total: 0, correct: 0 };
                }

                themeStats[theme].total++;
                if (isCorrect) themeStats[theme].correct++;
            });

            const themes = Object.keys(themeStats);
            const percentages = themes.map(theme =>
                Math.round((themeStats[theme].correct / themeStats[theme].total) * 100)
            );

            const themeNames = {
                'general': 'G√©n√©ralit√©s',
                'construction': 'Construction',
                'electricity': '√âlectricit√©',
                'safety': 'S√©curit√©'
            };

            // D√©truire le graphique existant s'il existe
            if (window.performanceChartInstance) {
                window.performanceChartInstance.destroy();
            }

            window.performanceChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: themes.map(t => themeNames[t]),
                    datasets: [{
                        label: '% de r√©ussite',
                        data: percentages,
                        backgroundColor: [
                            'rgba(234, 88, 12, 0.7)',
                            'rgba(5, 150, 105, 0.7)',
                            'rgba(51, 65, 85, 0.7)',
                            'rgba(120, 113, 108, 0.7)'
                        ],
                        borderColor: [
                            'rgb(234, 88, 12)',
                            'rgb(5, 150, 105)',
                            'rgb(51, 65, 85)',
                            'rgb(120, 113, 108)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Pourcentage de r√©ussite'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // G√âN√âRER LA LISTE DE CONSEILS
        function generateAdviceList(percentage) {
            const adviceList = document.getElementById('adviceList');
            adviceList.innerHTML = '';

            let advices = [];

            // Conseils bas√©s sur le score
            if (percentage >= 90) {
                advices.push('Excellente performance ! Vous ma√Ætrisez parfaitement la r√©glementation CTS.');
                advices.push('Envisagez de passer la certification officielle.');
            } else if (percentage >= 75) {
                advices.push('Tr√®s bon niveau ! Quelques d√©tails √† perfectionner.');
                advices.push('Revoyez les cas particuliers et d√©rogations.');
            } else if (percentage >= 60) {
                advices.push('Bon niveau de connaissances.');
                advices.push('Concentrez-vous sur les chapitres o√π vous avez fait des erreurs.');
            } else {
                advices.push('Continuez √† vous former.');
                advices.push('Revoyez les bases de la r√©glementation CTS.');
            }

            // Conseils g√©n√©raux
            advices.push('Consultez r√©guli√®rement les mises √† jour r√©glementaires.');
            advices.push('Participez √† des formations continues.');
            advices.push('Pratiquez avec des √©tudes de cas r√©els.');

            // Ajouter les conseils √† la liste
            advices.forEach(advice => {
                const li = document.createElement('li');
                li.className = 'flex items-start mb-3';
                li.innerHTML = `
                    <i class="fas fa-check-circle text-emerald-500 mt-1 mr-3"></i>
                    <span>${advice}</span>
                `;
                adviceList.appendChild(li);
            });
        }

        // T√âL√âCHARGER LE CERTIFICAT
        function downloadCertificate() {
            alert('Fonctionnalit√© de t√©l√©chargement √† impl√©menter.');
            // Ici, vous pourriez utiliser html2canvas pour g√©n√©rer une image du certificat
        }

        // RECOMMENCER LE QUIZ
        function restartQuiz() {
            // Retour √† la configuration
            switchTab('config');

            // R√©initialiser les variables
            quizQuestions = [];
            currentQuestionIndex = 0;
            userAnswers = [];
            correctAnswers = 0;
            timePerQuestion = [];

            // Cacher les r√©sultats
            document.getElementById('resultsContainer').classList.add('hidden');
            document.getElementById('noResultsMessage').classList.remove('hidden');
        }

        // NAVIGATION CLAVIER
        document.addEventListener('keydown', (e) => {
            // Ignorer si on n'est pas dans le quiz
            const quizTab = document.getElementById('quiz');
            if (!quizTab || !quizTab.classList.contains('active')) return;

            switch (e.key) {
                case 'ArrowLeft':
                    if (currentQuestionIndex > 0) previousQuestion();
                    break;
                case 'ArrowRight':
                    if (currentQuestionIndex < quizQuestions.length - 1) nextQuestionOrFinish();
                    break;
                case '1':
                case '2':
                case '3':
                case '4':
                    const answerIndex = parseInt(e.key) - 1;
                    if (answerIndex >= 0 && answerIndex < 4 && userAnswers[currentQuestionIndex] === null) {
                        selectAnswer(answerIndex);
                    }
                    break;
                case 'h':
                case 'H':
                    showHint();
                    break;
                case 'Enter':
                    if (currentQuestionIndex === quizQuestions.length - 1) {
                        finishQuiz();
                    } else {
                        nextQuestionOrFinish();
                    }
                    break;
            }
        });
    </script>
</body>

</html>
